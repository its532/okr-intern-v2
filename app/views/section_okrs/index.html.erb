<% provide(:title, 'Section OKR') %>

<div>
  <div class="flex">
    <%= link_to '新規登録', new_section_okr_path %>
  </div>
<h1>Users</h1>
<div class="table-responsive">
　　<table class="table table-condensed">
    <tr>
      <th scope="col">Name</th>
      <th scope="col">Address</th>
      <th colspan="3"></th>
    </tr>
    <% @section_okrs.each do |section_okr| %>
      <tr>
        <td scope="row"><%= section_okr.section %></td>
        <td scope="row"><%= section_okr.objective %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<div class="table-responsive">
  <table class="table table-condensed">
      <thead class="">
        <tr class="">
          <th class="col">
            <span class="text-gray-300">Section</span>
          </th>
          <th class="col">
            <span class="text-gray-300">Objective</span>
          </th>
          <th class="col">
            <span class="text-gray-300">総合得点</span>
          </th>
          <th class="col">
            <span class="text-gray-300">Point</span>
          </th>
          <th class="col">
            <span class="text-gray-300">KeyResult</span>
          </th>
          <th class="col">
            <span class="text-gray-300">操作一覧</span>
          </th>
        </tr>
      </thead>
      <tbody class="bg-gray-200">
      <% @section_okrs.each do |section_okr| %>
        <tr class="bg-white border-4 border-gray-200">
          <td class="px-4 py-2 text-center">
            <span class="font-semibold"><%= section_okr.section %></span>
          </td>
          <td class="px-4 py-2 text-center">
            <span class="font-semibold"><%= section_okr.objective %></span>
          </td>
          <td class="px-4 py-2 text-center">
            <span class="font-semibold"><%= average_score_point(section_okr.section_key_results) %></span>
          </td>
          <td class="px-4 py-2 text-center">
          <% section_okr.section_key_results.each do |section_key_result| %>
            <p class="font-semibold border-gray-400"><%= section_key_result.key_result_point %></p>
          <% end %>
          </td>
          <td class="px-4 py-2 text-center">
          <% section_okr.section_key_results.each do |section_key_result| %>
            <ul>
              <li class="font-semibold border-gray-400"><%= section_key_result.key_result %><hr></li>
            <ul>
          <% end %>
          </td>
          <td class="px-4 py-2 text-center">
            <div>
              <%= link_to 'コメント', section_key_results_path(section_okr_id: section_okr.id), class: 'bg-blue-500 rounded-lg text-white text-center px-2 py-0.5 transition duration-300 ease-in-out hover:bg-blue-600' %>
            </div>
            <div>
              <%= link_to '編集', edit_section_okr_path(section_okr.id),  class: 'bg-green-500 rounded-lg text-white text-center px-2 py-0.5 transition duration-300 ease-in-out hover:bg-green-600' %>
            </div>
            <div>
              <%= link_to '削除', section_okr_path(section_okr.id), method: :delete, class: 'bg-red-500 rounded-lg text-white text-center px-2 py-0.5 transition duration-300 ease-in-out hover:bg-red-600', data: { confirm: '削除してよろしいですか？' } %>
            </td>
          </td>
        </tr>
      <% end %>
      </tbody>
    </table>
</div>


    <% @section_okrs.each do |section_okr| %>
      <p class="font-semibold"><%= section_okr.section %></p>
      <p class="font-semibold"><%= section_okr.objective %></p>

      <ul>
        <% section_okr.key_results.each do |key_result| %>
          <li><%= key_result.title %></li>
          <li><%= key_result.point %></li>
        <% end %>
      </ul>

      <div>
        <%= link_to '編集', edit_section_okr_path(section_okr.id),  class: '' %>
        <%= link_to '削除', section_okr_path(section_okr.id), method: :delete, class: '', data: { confirm: '削除してよろしいですか？' } %>
      </div>
    <% end %>
</div>
